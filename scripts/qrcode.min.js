(function () {
  function SimpleQRCode(element, options) {
    if (!element) throw new Error('QRCode: container element is required');

    this._el = element;
    this._opts = options || {};

    var text = this._opts.text || '';
    this.makeCode(text);
  }

  SimpleQRCode.prototype.clear = function () {
    while (this._el.firstChild) {
      this._el.removeChild(this._el.firstChild);
    }
  };

  SimpleQRCode.prototype.makeCode = function (text) {
    this.clear();
    if (!text) return;

    var size = this._opts.width || this._opts.height || 200;
    var img = document.createElement('img');

    img.width = this._opts.width || size;
    img.height = this._opts.height || size;
    img.alt = text;

    var encoded = encodeURIComponent(String(text));
    img.src =
      'https://api.qrserver.com/v1/create-qr-code/?size=' +
      size +
      'x' +
      size +
      '&data=' +
      encoded;

    this._el.appendChild(img);
  };

  window.QRCode = SimpleQRCode;
  window.QRCode.CorrectLevel = { L: 1, M: 0, Q: 3, H: 2 };
})();

